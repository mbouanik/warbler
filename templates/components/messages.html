<li class="list-group-item">
  <div class="m">
    <button
      type="button"
      class="btn btn-sm"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="fa-solid fa-ellipsis"></i>
    </button>

    <ul class="dropdown-menu">
      <li class="dropdown-item">
        {% if msg.user.id == g.user.id %}
        <form action="/messages/{{ msg.id }}/delete" method="POST">
          <button class="btn btn-link text-muted">Delete</button>
        </form>
        {% endif %}
      </li>
      <li class="dropdown-item">
        {% if msg.user.id != g.user.id %} {% if msg.user in g.user.following %}
        <form action="/users/unfollow/{{msg.user.id}}" method="POST">
          <button class="btn btn-link text-muted">Unfollow</button>
        </form>
        {% else %}
        <form action="/users/follow/{{msg.user.id}}" method="POST">
          <button class="btn btn-link text-muted">Follow</button>
        </form>
        {% endif %} {% endif %}
      </li>
    </ul>
  </div>
  <div class="message">
    <a class="" href="/users/{{ msg.user.id }}">
      <img src="{{ msg.user.image_url }}" alt="" class="timeline-image" />
    </a>
    <div class="message-area">
      <a href="/users/{{ msg.user.id }}">@{{ msg.user.username }}</a>
      <span class="text-muted">{{ msg.timestamp.strftime('%b %d, %Y') }}</span>
      <p>{{ msg.text }}</p>
    </div>
  </div>
</li>
<div class="like-btn">
  <div class="interaction">
    <form id="{{msg.id}}" class="like_form" method="POST">
      <button class="btn">
        {% if msg in g.user.likes %}
        <i id="like_icon{{msg.id}}" class="fa-solid fa-thumbs-up liked">
          <small id="likes_count"> {{ msg.users | length }} </small>
        </i>
        {% else %}
        <i id="like_icon{{msg.id}}" class="fa-regular fa-thumbs-up not-liked">
          <small id="likes_count"> {{ msg.users | length }} </small>
        </i>
        {% endif %}
      </button>
    </form>
  </div>
  <div class="interaction">
    <a class="btn primary" href="/messages/{{ msg.id }}">
      {% if msg in g.user.comments %}
      <i class="fa-sharp fa-solid fa-comment liked">
        <small id="comments_count"> {{ msg.comments | length }} </small>
      </i>
      {% else %}
      <i class="fa-sharp fa-regular fa-comment not-commented">
        <small id="comments_count"> {{ msg.comments | length }} </small>
      </i>
      {% endif %}
    </a>
  </div>
  <div class="interaction">
    <form id="{{msg.id}}" class="repost_form" method="POST">
      <button class="btn">
        {% if msg in g.user.reposted %}
        <i id="repost_icon{{msg.id}}" class="fa-solid fa-retweet reposted">
          <small id="repost_count"> {{ msg.reposted | length }} </small>
        </i>
        {% else %}
        <i id="repost_icon{{msg.id}}" class="fa-solid fa-retweet not-reposted">
          <small id="repost_count"> {{ msg.reposted | length }} </small>
        </i>
        {% endif %}
      </button>
    </form>
  </div>
</div>
