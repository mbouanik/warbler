<li id="msg{{msg.id}}" class="list-group-item">
  {% if msg in user.reposted %} {% if user.id == g.user.id %}
  <small style="position: absolute"
    >You reposted <i class="fa-solid fa-retweet"></i>
  </small>
  {% else %}
  <small style="position: absolute"
    >{{ user.username}} reposted <i class="fa-solid fa-retweet"></i>
  </small>
  {% endif %} {%endif %}
  <div class="m">
    <button
      type="button"
      class="btn"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="fa-solid fa-ellipsis"></i>
    </button>

    <ul class="dropdown-menu">
      <li class="dropdown-item">
        {% if msg.user.id == g.user.id %}
        <form id="{{msg.id}}" class="delete-msg" method="POST">
          <button class="btn btn-link text-danger">
            <i class="fa-solid fa-trash"></i> Delete
          </button>
        </form>
        {% endif %}
      </li>
      <li class="dropdown-item">
        {% if msg.user.id != g.user.id %}
        <form id="{{msg.user.id}}" class="follows" method="POST">
          {% if msg.user in g.user.following %}

          <button class="btn btn-link text-muted">Unfollow</button>
          {% else %}
          <button class="btn btn-link text-muted">Follow</button>
          {% endif %}
        </form>
        {% endif %}
      </li>
    </ul>
  </div>

  <div class="message">
    <a class="" href="/users/{{ msg.user.id }}">
      <img src="{{ msg.user.image_url }}" alt="" class="timeline-image" />
    </a>
    <div class="message-area">
      <a href="/users/{{ msg.user.id }}">@{{ msg.user.username }}</a>
      <span class="text-muted">{{ msg.timestamp.strftime('%d %b %y') }}</span>
      <p>{{ msg.text }}</p>
    </div>
  </div>
</li>

<div id="msg{{msg.id}}" class="like-btn">
  <div class="interaction">
    <form id="{{msg.id}}" class="like_form" method="POST">
      <button class="btn">
        {% if msg in g.user.likes %}
        <i id="like_icon{{msg.id}}" class="fa-solid fa-thumbs-up liked">
          <small id="likes_count"> {{ msg.users | length }} </small>
        </i>
        {% else %}
        <i id="like_icon{{msg.id}}" class="fa-regular fa-thumbs-up not-liked">
          <small id="likes_count"> {{ msg.users | length }} </small>
        </i>
        {% endif %}
      </button>
    </form>
  </div>
  <div class="interaction">
    <a class="btn primary" href="/messages/{{ msg.id }}">
      {% if msg in g.user.comments %}
      <i class="fa-sharp fa-solid fa-comment liked">
        <small id="comments_count"> {{ msg.comments | length }} </small>
      </i>
      {% else %}
      <i class="fa-sharp fa-regular fa-comment not-commented">
        <small id="comments_count"> {{ msg.comments | length }} </small>
      </i>
      {% endif %}
    </a>
  </div>
  <div class="interaction">
    <form id="{{msg.id}}" class="repost_form" method="POST">
      <button class="btn">
        {% if msg in g.user.reposted %}
        <i id="repost_icon{{msg.id}}" class="fa-solid fa-retweet reposted">
          <small id="repost_count"> {{ msg.reposted | length }} </small>
        </i>
        {% else %}
        <i id="repost_icon{{msg.id}}" class="fa-solid fa-retweet not-reposted">
          <small id="repost_count"> {{ msg.reposted | length }} </small>
        </i>
        {% endif %}
      </button>
    </form>
  </div>
</div>
